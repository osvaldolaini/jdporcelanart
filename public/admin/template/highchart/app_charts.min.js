var App_charts = function () {
    let first = function(){
        $.ajax({
            //busca eventos
            url: APP_URL + '/charts/first',

            dataType: 'json',
            type : "GET",
            success: function (response) {
                console.log(response)
                Highcharts.chart('first', {
                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: ''
                    },
                    subtitle: {
                        text: 'Todas as páginas'
                    },
                    xAxis: {
                        categories: response.labels
                    },
                    yAxis: {
                        title: {
                            text: 'Visualizações (Un)'
                        }
                    },
                    plotOptions: {
                        line: {
                            dataLabels: {
                                enabled: true
                            },
                            enableMouseTracking: false
                        }
                    },
                    series: [{
                        name: 'cssgapa.com.br',
                        data: response.views
                    }]
                });
            }
        })
    }
    let second = function(){
        $.ajax({
            //busca eventos
            url: APP_URL + '/charts/second',
            dataType: 'json',
            type : "GET",
            success: function (response) {
                console.log(response)
                Highcharts.chart('second', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: ''
                    },
                    accessibility: {
                        announceNewData: {
                            enabled: true
                        }
                    },
                    xAxis: {
                        type: 'category'
                    },
                    yAxis: {
                        title: {
                            text: 'Visualizações por aparelho'
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            dataLabels: {
                                enabled: true,
                                format: '{point.y:.1f}%'
                            }
                        }
                    },

                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
                    },

                    series: [
                        {
                            name: "Aparelho",
                            colorByPoint: true,
                            data: response.data
                        }
                    ],
                });

            },
            error: function (response) {
                console.log(response)
            }
        })
    }
    let third = function(){
        $.ajax({
            //busca eventos
            url: APP_URL + '/charts/third',
            dataType: 'json',
            type : "GET",
            success: function (response) {
                Highcharts.chart('third', {
                    chart: {
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false,
                        type: 'pie'
                    },
                    title: {
                        text: ''
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    accessibility: {
                        point: {
                            valueSuffix: '%'
                        }
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                format: '<b style="font-size:8pt;">{point.name}</b>: {point.percentage:.1f} %'
                            }
                        }
                    },
                    series: [{
                        name: 'Porcentagem',
                        colorByPoint: true,
                        data: response.name
                    }]
                });
            },
        })
    }
    let four = function(){
        $.ajax({
            //busca eventos
            url: APP_URL + '/charts/four',
            dataType: 'json',
            type : "GET",
            success: function (response) {
                console.log(response)
                Highcharts.chart('four', {
                    chart: {
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false,
                        type: 'pie'
                    },
                    title: {
                        text: ''
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    accessibility: {
                        point: {
                            valueSuffix: '%'
                        }
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                format: '<b style="font-size:8pt;">{point.name}</b>: {point.percentage:.1f} %'
                            }
                        }
                    },
                    series: [{
                        name: 'Porcentagem',
                        colorByPoint: true,
                        data: response.name
                    }]
                });
            },
            error: function (response) {
                console.log(response)
            }
        })
    }
    return{
      init: function(){
        first()
        second()
        third()
        //four()
      }
    }
  }()

  jQuery(document).ready(function(){
    App_charts.init();
  })
